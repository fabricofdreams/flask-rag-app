{% extends "base.html" %} {% block content %}
<div class="container">
  <h1>PDF Document Query System</h1>

  <section class="upload-section">
    <h2>Upload PDF Files</h2>
    <form
      action="{{ url_for('upload_file') }}"
      method="post"
      enctype="multipart/form-data"
    >
      <input type="file" name="pdf_files" accept=".pdf" multiple required />
      <button type="submit">Upload</button>
    </form>
  </section>

  <section class="query-section" id="query-section">
    <h2>Ask Questions</h2>
    <form id="queryForm">
      <textarea
        name="query"
        placeholder="Enter your question..."
        required
      ></textarea>
      <button type="submit">Ask</button>
    </form>
    <div id="response"></div>
  </section>
</div>

<script>
  document.getElementById("queryForm").onsubmit = async function (e) {
    e.preventDefault();
    const query = e.target.query.value;
    const response = await fetch('{{ url_for("query") }}', {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded",
      },
      body: `query=${encodeURIComponent(query)}`,
    });
    const data = await response.json();
    document.getElementById(
      "response"
    ).innerHTML = `<p><strong>Response:</strong> ${data.response}</p>`;
  };
</script>
{% endblock %}
